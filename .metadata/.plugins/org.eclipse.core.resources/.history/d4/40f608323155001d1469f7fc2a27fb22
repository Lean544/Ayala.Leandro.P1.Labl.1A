/*
 * listar.c
 *
 *  Created on: 26 oct. 2022
 *      Author: ayala
 */
#include <stdio.h>
#include <stdlib.h>
#include "string.h"
#include "fecha.h"
#include "tipo.h"
#include "color.h"
#include "mascota.h"
#include "servicio.h"
#include "trabajo.h"
#include "validaciones.h"
#include "cliente.h"
#include "calculos.h"

void listarTipos (eTipo tipo[],int tamTipo){

	int anchoColumnasTexto=-20;
	int anchoColumnasNumero=-20;

	printf("|%*s|%*s|\n",anchoColumnasTexto,"Id",anchoColumnasTexto,"Tipo");
	for(int i=0;i<tamTipo;i++){
		printf("|%*d|%*s|\n",anchoColumnasTexto,tipo[i].id,anchoColumnasNumero,tipo[i].descripcion);
		printf("-------------------------------------------\n");
	}

}


void listarMascotas(eMascota personas[],int TAM,eTipo tipo[],int tamTipo,eColor color[],int tamColor,eCliente cliente[],int tamCliente){

	int anchoColumnasTexto=-20;
	int anchoColumnasNumero=-20;
	int i;
	int j;
	int x;
	int y;

	ordenar(personas,TAM);

	printf("|%*s|%*s|%*s|%*s|%*s|%*s|%*s|%*s|\n",anchoColumnasTexto,"Id",anchoColumnasTexto,"Nombre",anchoColumnasNumero,
	"Tipo",anchoColumnasTexto,"Color",anchoColumnasTexto,"Edad",
	anchoColumnasTexto,"Estado Vacunación",anchoColumnasTexto,"Dueño",anchoColumnasTexto,"Sexo");

	for(i=0;i<TAM;i++){

		if(personas[i].isEmpty==0){

			for(j=0;j<tamTipo;j++){
				if(personas[i].idTipo==tipo[j].id){
						break;
				}
			}

			for(x=0;x<tamColor;x++){
				if(personas[i].idColor==color[x].id){

					break;
				}
			}
			for(y=0;y<tamCliente;y++){
				if(personas[i].idCliente==cliente[y].id){

					break;
				}
			}

			printf("\n----------------------------------------------------------------------------------------------------\n");
			printf("|%*d|%*s|%*s|%*s|%*d|%*c|%*s|%*s|\n",anchoColumnasTexto,personas[i].id,anchoColumnasNumero,personas[i].nombre
			,anchoColumnasNumero,tipo[j].descripcion,anchoColumnasTexto,color[x].nombreColor
			,anchoColumnasTexto,personas[i].edad,anchoColumnasTexto,personas[i].vacunado,
			anchoColumnasTexto,cliente[y].nombre,anchoColumnasTexto,cliente[y].sexo);
		}
	}

}

void listarColores(eColor color[],int tamColor){
	int anchoColumnasTexto=-20;
	int anchoColumnasNumero=-20;

	printf("|%*s|%*s|\n",anchoColumnasTexto,"Id",anchoColumnasTexto,"Color");
	for(int i=0;i<tamColor;i++){
		printf("|%*d|%*s|\n",anchoColumnasTexto,color[i].id,anchoColumnasNumero,color[i].nombreColor);
		printf("-------------------------------------------\n");
	}


}

void listarClientes(eCliente cliente[],int tamCliente){
	int anchoColumnasTexto=-20;
	int anchoColumnasNumero=-20;

	printf("|%*s|%*s|%*s|\n",anchoColumnasTexto,"Id",anchoColumnasTexto,"Nombre",anchoColumnasTexto,"Sexo");
	for(int i=0;i<tamCliente;i++){
		printf("|%*d|%*s|%*s|\n",anchoColumnasNumero,cliente[i].id,anchoColumnasTexto,cliente[i].nombre,anchoColumnasTexto,cliente[i].sexo);
		printf("-------------------------------------------\n");
	}


}

void listarServicios(eServicio servicio[],int tamServicio){
	int anchoColumnasTexto=-20;
	int anchoColumnasNumero=-20;

	printf("|%*s|%*s|%*s\n",anchoColumnasTexto,"Id",anchoColumnasTexto,"Servicio",anchoColumnasNumero,"Precio");
	for(int i=0;i<tamServicio;i++){
		printf("|%*d|%*s|%*f\n",anchoColumnasTexto,servicio[i].id,anchoColumnasNumero,servicio[i].descripcion,anchoColumnasNumero,servicio[i].precio);
		printf("-------------------------------------------\n");
	}
}

void listarTrabajos(eTrabajo* trabajo,int TAM,eMascota mascota[],eServicio servicio[],int tamServicio){
	int anchoColumnasTexto=-20;
	int anchoColumnasNumero=-20;
	int i;
	int j;
	int x;

	printf("|%*s|%*s|%*s|%*s\n",anchoColumnasNumero,"Id",anchoColumnasTexto,"Mascota",anchoColumnasTexto,"Servicio",anchoColumnasTexto,"Fecha");
	for(i=0;i<TAM;i++){
		if((trabajo+i)->isEmpty==0){
			for(j=0;j<TAM;j++){
				if((trabajo+i)->idMascota==mascota[j].id){
					break;
				}
			}

			for(x=0;x<tamServicio;x++){
				if((trabajo+i)->idServicio==servicio[x].id){
					break;
				}
			}

			printf("\n----------------------------------------------------------------------------------------------------\n");
			printf("|%*d|%*s|%*s|%d/%d/%d|\n",anchoColumnasNumero,(trabajo+i)->id,anchoColumnasTexto,mascota[j].nombre
			,anchoColumnasTexto,servicio[x].descripcion,(trabajo+i)->fecha.anio,(trabajo+i)->fecha.mes,(trabajo+i)->fecha.dia);
		}
	}

}

void listarColorSeleccionado(eMascota personas[],int TAM,eTipo tipo[],int tamTipo,eColor color[],int tamColor,eCliente cliente[],int tamCliente){
	int seleccion;
	int retorno;
	int anchoColumnasTexto=-20;
	int anchoColumnasNumero=-20;
	int j;
	int x;
	int y;

	listarColores(color,tamColor);
	retorno=utn_getNumero(&seleccion,"Que color desea mostrar?","Error",5000,5004,5);
	if(retorno==0){

		for(int i=0;i<TAM;i++){

			if(personas[i].idColor==seleccion && personas[i].isEmpty==0){

				for(j=0;j<tamTipo;j++){
					if(personas[i].idTipo==tipo[j].id){
									break;
						}
				}

				for(x=0;x<tamColor;x++){
					if(personas[i].idColor==color[x].id){

						break;
					}
				}

				for(y=0;y<tamCliente;y++){
					if(personas[i].idCliente==cliente[y].id){

							break;
					}
				}

				printf("\n----------------------------------------------------------------------------------------------------\n");
				printf("|%*d|%*s|%*s|%*s|%*d|%*c|%*s|%*s|\n",anchoColumnasTexto,personas[i].id,anchoColumnasNumero,personas[i].nombre
						,anchoColumnasNumero,tipo[j].descripcion,anchoColumnasTexto,color[x].nombreColor
				,anchoColumnasTexto,personas[i].edad,anchoColumnasTexto,personas[i].vacunado,
				anchoColumnasTexto,cliente[y].nombre,anchoColumnasTexto,cliente[y].sexo);
			}
		}
	}
}

void listarPorcentaje(eMascota personas[],int TAM,eTipo tipo[],int tamTipo,eColor color[],int tamColor,eCliente cliente[],int tamCliente){
	int i;
	int contVacunadas;
	for(i=0;i<TAM;i++){
		if(personas[i].vacunado == 's' && personas[i].isEmpty==0){

		}
	}
}
void listadosExtra(eMascota personas[],int TAM,eTipo tipo[],int tamTipo,eColor color[],int tamColor,eCliente cliente[],int tamCliente){

	int retorno;
	int menu;

	do{
		retorno=utn_getNumero(&menu,"Que desea listar?\n1.Seleccionar un color y mostrar las mascotas de ese color\n"
			"2.Mostrar el promedio de mascotas vacunadas\n3.Mostrar las mascotas de menor edad\n4.Mascotas Listadas por tipo\n"
			"5.Elegir un color y un tipo y mostrar la cantidad de mascotas\n6.Mostrar el color con mas cantidad de mascotas\n"
			"7.Salir","Error",1,7,5);
		if(retorno==0){
			switch(menu){
			case 1:
				listarColorSeleccionado(personas,TAM,tipo,tamTipo,color,tamColor,cliente,tamCliente);
				break;

			case 2:

				break;

			case 3:

				break;
			case 4:

				break;
			case 5:

				break;
			case 6:

				break;
			case 7:
				printf("Volviendo al menu anterior\n");
				break;
			}
		}
	}while(menu !=7);
}

